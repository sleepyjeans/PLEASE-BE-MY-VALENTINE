<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Be My Valentine?</title>

  <!-- Pixel / Minecraft-style font -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      height: 100vh;
      background: linear-gradient(to bottom, #ffd6e8, #ffb6d5);
      font-family: 'Press Start 2P', cursive;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .heart {
      position: absolute;
      width: 16px;
      height: 16px;
      background: #ff4d88;
      image-rendering: pixelated;
      transform: rotate(45deg);
      animation: float 8s linear infinite, pulse 2s ease-in-out infinite;
      opacity: 0.6;
    }

    .heart::before,
    .heart::after {
      content: "";
      position: absolute;
      width: 16px;
      height: 16px;
      background: #ff4d88;
    }

    .heart::before { top: -8px; left: 0; }
    .heart::after { left: -8px; top: 0; }

    @keyframes float {
      from { transform: translateY(100vh) rotate(45deg); }
      to { transform: translateY(-20vh) rotate(45deg); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1) rotate(45deg); }
      50% { transform: scale(1.15) rotate(45deg); }
    }

    @keyframes bounceIn {
      0% { transform: scale(0.2); opacity: 0; }
      60% { transform: scale(1.1); opacity: 1; }
      80% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }

    .popup {
      background: #fff0f7;
      border: 4px solid #ff4d88;
      padding: 30px;
      text-align: center;
      z-index: 10;
      box-shadow: 8px 8px 0 #ff9bbf;
      animation: bounceIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
    }

    .popup h1 {
      font-size: 14px;
      margin-bottom: 10px;
      color: #ff2f77;
    }

    .subtext {
      font-size: 8px;
      margin-bottom: 20px;
      color: #c2185b;
    }

    .buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
    }

    button {
      font-family: 'Press Start 2P', cursive;
      font-size: 10px;
      padding: 10px 16px;
      background: #ff4d88;
      color: white;
      border: 3px solid #ff2f77;
      cursor: pointer;
      box-shadow: 4px 4px 0 #ff9bbf;
    }

    button:hover { background: #ff2f77; }

    .sticker {
      position: absolute;
      top: -14px;
      right: -14px;
      font-size: 22px;
      transform: rotate(-20deg);
    }

    .music-toggle {
      position: fixed;
      bottom: 12px;
      right: 12px;
      font-size: 8px;
      background: #fff0f7;
      border: 3px solid #ff4d88;
      padding: 8px 10px;
      cursor: pointer;
      box-shadow: 4px 4px 0 #ff9bbf;
      z-index: 20;
    }
  </style>
</head>
<body>

  <script>
    // pixel click sound
    function playPixelSound() {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.type = 'square';
      osc.frequency.value = 880;
      gain.gain.setValueAtTime(0.1, ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.15);
      osc.connect(gain);
      gain.connect(ctx.destination);
      osc.start();
      osc.stop(ctx.currentTime + 0.15);
    }

    // floating hearts
    for (let i = 0; i < 25; i++) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.animationDuration = 5 + Math.random() * 6 + 's';
      heart.style.animationDelay = Math.random() * 5 + 's';
      document.body.appendChild(heart);
    }

    // heart explosion
    function explodeHearts() {
      for (let i = 0; i < 20; i++) {
        const h = document.createElement('div');
        h.className = 'heart';
        h.style.left = '50vw';
        h.style.top = '50vh';
        h.style.animation = 'none';
        document.body.appendChild(h);

        const angle = Math.random() * 2 * Math.PI;
        const distance = Math.random() * 200 + 50;

        h.animate([
          { transform: 'translate(0,0) scale(1)' },
          { transform: `translate(${Math.cos(angle)*distance}px, ${Math.sin(angle)*distance}px) scale(0)` }
        ], { duration: 800, easing: 'ease-out' });

        setTimeout(() => h.remove(), 800);
      }
    }

    // MUSIC GENERATION using Web Audio API
    let audioContext;
    let musicOscillator;
    let musicGain;
    let musicOn = false;
    let currentNote = 0;

    // Simple romantic melody (frequencies in Hz)
    const melody = [
      523.25, 587.33, 659.25, 587.33, // C D E D
      523.25, 587.33, 659.25, 698.46, // C D E F
      783.99, 659.25, 587.33, 523.25, // G E D C
      587.33, 523.25, 466.16, 523.25  // D C B C
    ];

    function playNote(frequency) {
      if (!audioContext) return;
      
      const osc = audioContext.createOscillator();
      const gain = audioContext.createGain();
      
      osc.type = 'sine';
      osc.frequency.value = frequency;
      
      gain.gain.setValueAtTime(0, audioContext.currentTime);
      gain.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + 0.05);
      gain.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.4);
      gain.gain.linearRampToValueAtTime(0, audioContext.currentTime + 0.5);
      
      osc.connect(gain);
      gain.connect(audioContext.destination);
      
      osc.start(audioContext.currentTime);
      osc.stop(audioContext.currentTime + 0.5);
    }

    function startMusic() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
      
      function playNextNote() {
        if (!musicOn) return;
        
        playNote(melody[currentNote]);
        currentNote = (currentNote + 1) % melody.length;
        
        setTimeout(playNextNote, 500); // Play note every 500ms
      }
      
      playNextNote();
    }

    function stopMusic() {
      musicOn = false;
    }

    function toggleMusic(btn) {
      if (!musicOn) {
        musicOn = true;
        startMusic();
        btn.innerText = 'music: on';
      } else {
        stopMusic();
        btn.innerText = 'music: off';
      }
    }
  </script>

  <!-- Popup -->
  <div class="popup">
    <div class="sticker">âžµ</div>
    <h1>do you want to be my valentine?</h1>
    <p class="subtext">this is not optional.</p>
    <div class="buttons">
      <button onclick="playPixelSound(); explodeHearts(); alert('VALENTINE ACCEPTED ðŸ’— no refunds')">yes</button>
      <button onclick="playPixelSound(); explodeHearts(); alert('theres no other choice ðŸ’ž ')">yes</button>
    </div>
  </div>

  <button class="music-toggle" onclick="toggleMusic(this)">music: off</button>
</body>
</html>
